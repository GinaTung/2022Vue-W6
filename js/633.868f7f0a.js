"use strict";(self["webpackChunknew_project_w6"]=self["webpackChunknew_project_w6"]||[]).push([[633],{633:function(t,e,l){l.r(e),l.d(e,{default:function(){return vt}});var o=l(252),a=l(577),s=l(963);const d={id:"app"},i={class:"container"},r=(0,o._)("h2",{class:"text-start mt-4"},"產品列表",-1),c={class:"text-end mt-4"},n={class:"table mt-4"},u=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{width:"120"},"分類"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",{width:"120"},"原價"),(0,o._)("th",{width:"120"},"售價"),(0,o._)("th",{width:"100"},"是否啟用"),(0,o._)("th",{width:"120"},"編輯")])],-1),p={class:"text-end"},m={class:"text-end"},b={key:0,class:"text-success"},_={key:1},h={class:"btn-group"},g=["onClick"],y=["onClick"],w={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},v={class:"modal-dialog modal-xl"},P={class:"modal-content border-0"},f=(0,o._)("div",{class:"modal-header bg-dark text-white"},[(0,o._)("h5",{id:"productModalLabel",class:"modal-title"},[(0,o._)("span",null,"新增產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},k={class:"row"},x={class:"col-sm-4"},C={class:"mb-3"},M=(0,o._)("label",{for:"imageUrl",class:"form-label"},"主圖網址",-1),V=["src"],D={class:"mb-3"},N=(0,o._)("h3",null,"多圖設置",-1),$={key:0},z=(0,o.Uk)(" (是不是Ray) "),j=["onUpdate:modelValue"],L=["src"],A={class:"col-sm-8"},H={class:"mb-3"},K=(0,o._)("label",{for:"title",class:"form-label"},"標題",-1),O={class:"row"},Y={class:"mb-3 col-md-6"},q=(0,o._)("label",{for:"category",class:"form-label"},"分類",-1),E={class:"mb-3 col-md-6"},R=(0,o._)("label",{for:"price",class:"form-label"},"單位",-1),Z={class:"row"},B={class:"mb-3 col-md-6"},F=(0,o._)("label",{for:"origin_price",class:"form-label"},"原價",-1),G={class:"mb-3 col-md-6"},I=(0,o._)("label",{for:"price",class:"form-label"},"售價",-1),J=(0,o._)("hr",null,null,-1),Q={class:"mb-3"},S=(0,o._)("label",{for:"description",class:"form-label"},"產品描述",-1),T={class:"mb-3"},W=(0,o._)("label",{for:"content",class:"form-label"},"說明內容",-1),X={class:"mb-3"},tt={class:"form-check"},et=(0,o._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),lt={class:"modal-footer"},ot=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),at={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},st={class:"modal-dialog"},dt={class:"modal-content border-0"},it=(0,o._)("div",{class:"modal-header bg-danger text-white"},[(0,o._)("h5",{id:"delProductModalLabel",class:"modal-title"},[(0,o._)("span",null,"刪除產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),rt={class:"modal-body"},ct=(0,o.Uk)(" 是否刪除 "),nt={class:"text-danger"},ut=(0,o.Uk)(" 商品(刪除後將無法恢復)。 "),pt={class:"modal-footer"},mt=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function bt(t,e,l,bt,_t,ht){return(0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("div",i,[r,(0,o._)("div",c,[(0,o._)("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=t=>ht.openModal("isNew"))}," 建立新的產品 ")]),(0,o._)("table",n,[u,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_t.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,a.zw)(t.category),1),(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",p,(0,a.zw)(t.origin_price),1),(0,o._)("td",m,(0,a.zw)(t.price),1),(0,o._)("td",null,[t.is_enabled?((0,o.wg)(),(0,o.iD)("span",b,"啟用")):((0,o.wg)(),(0,o.iD)("span",_,"未啟用"))]),(0,o._)("td",null,[(0,o._)("div",h,[(0,o._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>ht.openModal("edit",t)}," 編輯 ",8,g),(0,o._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>ht.openModal("delete",t)}," 刪除 ",8,y)])])])))),128))])])]),(0,o._)("div",w,[(0,o._)("div",v,[(0,o._)("div",P,[f,(0,o._)("div",U,[(0,o._)("div",k,[(0,o._)("div",x,[(0,o._)("div",C,[M,(0,o.wy)((0,o._)("input",{type:"text",id:"imageUrl","onUpdate:modelValue":e[1]||(e[1]=t=>_t.tempProduct.imageUrl=t),class:"form-control"},null,512),[[s.nr,_t.tempProduct.imageUrl]]),(0,o._)("img",{src:_t.tempProduct.imageUrl,class:"img-fluid",alt:""},null,8,V)]),(0,o._)("div",D,[N,Array.isArray(_t.tempProduct.imagesUrl)?((0,o.wg)(),(0,o.iD)("div",$,[z,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_t.tempProduct.imagesUrl,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:e+"21345"},[(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"imagesUrl","onUpdate:modelValue":t=>_t.tempProduct.imagesUrl[e]=t},null,8,j),[[s.nr,_t.tempProduct.imagesUrl[e]]]),(0,o._)("img",{src:_t.tempProduct.imagesUrl[e],class:"img-fluid",alt:""},null,8,L)])))),128)),!_t.tempProduct.imagesUrl.length||_t.tempProduct.imagesUrl[_t.tempProduct.imagesUrl.length-1]?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn-outline-primary btn-sm w-100",onClick:e[2]||(e[2]=t=>_t.tempProduct.imagesUrl.push(""))}," 新增 ")):((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn-outline-danger btn-sm w-100",onClick:e[3]||(e[3]=t=>_t.tempProduct.imagesUrl.pop())}," 刪除最後一個 "))])):(0,o.kq)("",!0)])]),(0,o._)("div",A,[(0,o._)("div",H,[K,(0,o.wy)((0,o._)("input",{id:"title",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>_t.tempProduct.title=t),class:"form-control",placeholder:"請輸入標題"},null,512),[[s.nr,_t.tempProduct.title]])]),(0,o._)("div",O,[(0,o._)("div",Y,[q,(0,o.wy)((0,o._)("input",{id:"category",type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>_t.tempProduct.category=t),class:"form-control",placeholder:"請輸入分類"},null,512),[[s.nr,_t.tempProduct.category]])]),(0,o._)("div",E,[R,(0,o.wy)((0,o._)("input",{id:"unit",type:"text","onUpdate:modelValue":e[6]||(e[6]=t=>_t.tempProduct.unit=t),class:"form-control",placeholder:"請輸入單位"},null,512),[[s.nr,_t.tempProduct.unit]])])]),(0,o._)("div",Z,[(0,o._)("div",B,[F,(0,o.wy)((0,o._)("input",{id:"origin_price",type:"number",min:"0","onUpdate:modelValue":e[7]||(e[7]=t=>_t.tempProduct.origin_price=t),class:"form-control",placeholder:"請輸入原價"},null,512),[[s.nr,_t.tempProduct.origin_price,void 0,{number:!0}]])]),(0,o._)("div",G,[I,(0,o.wy)((0,o._)("input",{id:"price",type:"number",min:"0","onUpdate:modelValue":e[8]||(e[8]=t=>_t.tempProduct.price=t),class:"form-control",placeholder:"請輸入售價"},null,512),[[s.nr,_t.tempProduct.price,void 0,{number:!0}]])])]),J,(0,o._)("div",Q,[S,(0,o.wy)((0,o._)("textarea",{id:"description",type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>_t.tempProduct.description=t),class:"form-control",placeholder:"請輸入產品描述"},"\r\n                  ",512),[[s.nr,_t.tempProduct.description]])]),(0,o._)("div",T,[W,(0,o.wy)((0,o._)("textarea",{id:"description",type:"text","onUpdate:modelValue":e[10]||(e[10]=t=>_t.tempProduct.content=t),class:"form-control",placeholder:"請輸入說明內容"},"\r\n                  ",512),[[s.nr,_t.tempProduct.content]])]),(0,o._)("div",X,[(0,o._)("div",tt,[(0,o.wy)((0,o._)("input",{id:"is_enabled","onUpdate:modelValue":e[11]||(e[11]=t=>_t.tempProduct.is_enabled=t),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[s.e8,_t.tempProduct.is_enabled]]),et])])])])]),(0,o._)("div",lt,[ot,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=(...t)=>ht.updateProduct&&ht.updateProduct(...t))}," 確認 ")])])])],512),(0,o._)("div",at,[(0,o._)("div",st,[(0,o._)("div",dt,[it,(0,o._)("div",rt,[ct,(0,o._)("strong",nt,(0,a.zw)(_t.tempProduct.title),1),ut]),(0,o._)("div",pt,[mt,(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:e[13]||(e[13]=(...t)=>ht.delProduct&&ht.delProduct(...t))}," 確認刪除 ")])])])],512)])}const _t={},ht={};var gt={data(){return{products:[],tempProduct:{imagesUrl:[]},isNew:!1,pagination:{}}},methods:{getProducts(t){const e=`https://vue3-course-api.hexschool.io/v2/api/yuling202202/admin/products/?page=${t}`;this.$http.get(e).then((t=>{this.products=t.data.products,console.log(Object.values(this.products)),Object.values(this.products).forEach((e=>{this.pagination=t.data.pagination,console.log(e)}))}))},openModal(t,e){console.log(t,e),"isNew"===t?(this.tempProduct={imagesUrl:[]},_t.show(),this.isNew=!0):"edit"===t?(this.tempProduct={...e},_t.show(),this.isNew=!1):"delete"===t&&(ht.show(),this.tempProduct={...e})},updateProduct(){let t="https://vue3-course-api.hexschool.io/v2/api/yuling202202/admin/product",e="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/v2/api/yuling202202/admin/product/${this.tempProduct.id}`,e="put"),this.$http[e](t,{data:this.tempProduct}).then((t=>{console.log(t),this.getProducts(),_t.hide()}))},delProduct(){const t=`https://vue3-course-api.hexschool.io/v2/api/yuling202202/admin/product/${this.tempProduct.id}`;this.$http.delete(t).then((t=>{console.log(t),this.getProducts(),ht.hide()}))}},mounted(){this.getProducts()}},yt=l(744);const wt=(0,yt.Z)(gt,[["render",bt]]);var vt=wt}}]);
//# sourceMappingURL=633.868f7f0a.js.map